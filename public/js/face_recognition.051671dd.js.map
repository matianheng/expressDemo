{"version":3,"sources":["webpack:///./src/views/face_recognition/index.vue?5f0b","webpack:///src/views/face_recognition/index.vue","webpack:///./src/views/face_recognition/index.vue?6281","webpack:///./src/views/face_recognition/index.vue","webpack:///./src/views/face_recognition/index.vue?07cd"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","isShow","expression","_m","_v","ref","attrs","on","takeVideo","noticeStatus","_e","$event","stopPropagation","closeDialog","apply","arguments","gotoRouter","closePage","openVideo","staticStyle","domProps","staticRenderFns","component"],"mappings":"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","file":"js/face_recognition.051671dd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"face tc phone-pad\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShow==1),expression:\"isShow==1\"}]},[_vm._m(0),_vm._m(1),_vm._m(2),_c('div',{staticClass:\"btn font-bold\"},[_c('div',{staticClass:\"phone-pad\"},[_c('label',{staticClass:\"mybtn\"},[_vm._v(\"开始录制\"),_c('input',{ref:\"VideoRef\",attrs:{\"type\":\"file\",\"capture\":\"user\",\"id\":\"fileselect\",\"accept\":\"video/*\"},on:{\"change\":_vm.takeVideo}})])])])]),(_vm.noticeShow)?_c('div',{staticClass:\"credentials-bg hiddenbg tc\"},[_c('div',{staticClass:\"credentials-bg-main hiddenbg_div\"},[_c('div',{staticClass:\"credentials-bg-top\"},[(_vm.noticeStatus==0 || _vm.noticeStatus==1 || _vm.noticeStatus==4 || _vm.noticeStatus==2)?_c('div',{staticClass:\"text1\"},[_vm._v(\"识别失败\")]):_vm._e(),(_vm.noticeStatus==0)?_c('div',{staticClass:\"text2 tl\"},[_vm._v(\"\\n          1. 确保本人面部出现在框内\"),_c('br'),_vm._v(\"\\n          2. 确保面部与屏幕保持适当距离\"),_c('br'),_vm._v(\"\\n          3. 保持光鲜充足和均匀\"),_c('br'),_vm._v(\"\\n          4. 摘掉眼镜并露出耳朵\\n        \")]):_vm._e(),(_vm.noticeStatus==1 || _vm.noticeStatus==2)?_c('div',{staticClass:\"text2\"},[_vm._v(\"请确保您的姓名、身份证号与人脸信息一致\")]):_vm._e(),(_vm.noticeStatus==4)?_c('div',{staticClass:\"text2\"},[_vm._v(\"如有疑问请联系客服\")]):_vm._e(),(_vm.noticeStatus==4)?_c('div',{staticClass:\"text2 text4\"},[_c('a',{attrs:{\"href\":\"tel:400-2222-222\"}},[_vm._v(\"400-2222-222\")])]):_vm._e(),(_vm.noticeStatus==5)?_c('div',{staticClass:\"text2\"},[_vm._v(\"视频时间只能为2~3秒，请重新拍摄\")]):_vm._e()]),_c('div',{staticClass:\"flex font-bold toast-mybtn\"},[(_vm.noticeStatus==1)?_c('div',{staticClass:\"munual-btn1\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closeDialog.apply(null, arguments)}}},[_vm._v(\"再试一次\")]):_vm._e(),(_vm.noticeStatus==1)?_c('div',{staticClass:\"line\"}):_vm._e(),(_vm.noticeStatus==1 || _vm.noticeStatus==2)?_c('div',{staticClass:\"munual-btn2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.gotoRouter(\"writeMes\")}}},[_vm._v(\"启用人工审核\")]):_vm._e(),(_vm.noticeStatus==0)?_c('div',{staticClass:\"munual-btn2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closeDialog.apply(null, arguments)}}},[_vm._v(\"重新识别\")]):_vm._e(),(_vm.noticeStatus==4)?_c('div',{staticClass:\"munual-btn2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.closePage.apply(null, arguments)}}},[_vm._v(\"我知道了\")]):_vm._e(),(_vm.noticeStatus==5)?_c('div',{staticClass:\"munual-btn2\",on:{\"click\":function($event){$event.stopPropagation();return _vm.openVideo.apply(null, arguments)}}},[_vm._v(\"我知道了\")]):_vm._e()])])]):_vm._e(),_c('video',{staticStyle:{\"object-fit\":\"fill\"},attrs:{\"muted\":\"\",\"id\":\"recordVideo\",\"playsinline\":\"true\",\"webkit-playsinline\":\"true\",\"x5-video-player-fullscreen\":\"true\",\"x5-video-player-type\":\"h5\",\"x5-video-orientation\":\"landscape\",\"controls\":\"controls\",\"preload\":\"auto\",\"x-webkit-airplay\":\"allow\"},domProps:{\"muted\":true}})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title onlyFlex flex-wrap-wrap\"},[_c('div',[_vm._v(\"请录制一段2～3秒的多次眨眼小视频\")]),_c('div',[_vm._v(\"请确保脸部清晰完整、光线充足\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img bgCss\"},[_c('div',{staticClass:\"tag bgCss\"},[_c('div',[_vm._v(\"眨眨眼\")])]),_c('div',{staticClass:\"text\"},[_vm._v(\"视频录制规范\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"onlyFlex show box space_between\"},[_c('div',[_c('div',{staticClass:\"bgCss bg1 bg\"}),_c('div',{staticClass:\"text\"},[_vm._v(\"请保持脸部完整对准框内\")])]),_c('div',[_c('div',{staticClass:\"bgCss bg2 bg\"}),_c('div',{staticClass:\"text\"},[_vm._v(\"避免光线过亮\")])]),_c('div',[_c('div',{staticClass:\"bgCss bg2 bg\"}),_c('div',{staticClass:\"text\"},[_vm._v(\"避免光线过亮\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"face tc phone-pad\">\n    <div v-show=\"isShow==1\">\n      <div class=\"title onlyFlex flex-wrap-wrap\">\n        <div>请录制一段2～3秒的多次眨眼小视频</div>\n        <div>请确保脸部清晰完整、光线充足</div>\n      </div>\n      <div class=\"img bgCss\">\n        <div class=\"tag bgCss\"><div>眨眨眼</div></div>\n        <div class=\"text\">视频录制规范</div>\n      </div>\n      <div class=\"onlyFlex show box space_between\">\n        <div>\n          <div class=\"bgCss bg1 bg\"></div>\n          <div class=\"text\">请保持脸部完整对准框内</div>\n        </div>\n        <div>\n           <div class=\"bgCss bg2 bg\"></div>\n          <div class=\"text\">避免光线过亮</div>\n        </div>\n        <div>\n           <div class=\"bgCss bg2 bg\"></div>\n          <div class=\"text\">避免光线过亮</div>\n        </div>\n      </div>\n      <!-- @click=\"gotoVd\" -->\n      <div class=\"btn font-bold\">\n        <div class=\"phone-pad\">\n          <!-- <div class=\"mybtn\">开始录制</div> -->\n          <!-- <label class=\"mybtn\">开始录制<input type=\"file\" ref='VideoRef' capture=\"camcorder\" id=\"fileselect\" accept=\"video/*\" @change=\"takeVideo\"/></label> -->\n          <label class=\"mybtn\">开始录制<input type=\"file\" ref='VideoRef' capture=\"user\" id=\"fileselect\" accept=\"video/*\" @change=\"takeVideo\"/></label>\n        </div>\n      </div>\n    </div>\n    <!-- <vd v-if=\"isShow==2\" @getVideo=\"getVideo\"></vd> -->\n    <!--错误提示-->\n    <div v-if='noticeShow' class=\"credentials-bg hiddenbg tc\">\n      <div class=\"credentials-bg-main hiddenbg_div\">\n        <div class=\"credentials-bg-top\">\n          <div v-if='noticeStatus==0 || noticeStatus==1 || noticeStatus==4 || noticeStatus==2' class=\"text1\">识别失败</div>\n          <!-- <div v-if=\"noticeStatus==0\" class=\"text2\">请确保您的姓名、身份证号与人脸信息一致</div> -->\n          <div v-if=\"noticeStatus==0\" class=\"text2 tl\">\n            1. 确保本人面部出现在框内<br/>\n            2. 确保面部与屏幕保持适当距离<br/>\n            3. 保持光鲜充足和均匀<br/>\n            4. 摘掉眼镜并露出耳朵\n          </div>\n          <div v-if='noticeStatus==1 || noticeStatus==2' class=\"text2\">请确保您的姓名、身份证号与人脸信息一致</div>\n          <div class=\"text2\" v-if=\"noticeStatus==4\">如有疑问请联系客服</div>\n          <div class=\"text2 text4\" v-if=\"noticeStatus==4\"><a href=\"tel:400-2222-222\">400-2222-222</a></div>\n          <div v-if=\"noticeStatus==5\" class=\"text2\">视频时间只能为2~3秒，请重新拍摄</div>\n        </div>\n        <div class=\"flex font-bold toast-mybtn\">\n          <div @click.stop='closeDialog' v-if='noticeStatus==1' class=\"munual-btn1\">再试一次</div>\n          <div v-if='noticeStatus==1' class=\"line\"></div>\n          <div v-if='noticeStatus==1 || noticeStatus==2' @click.stop='gotoRouter(\"writeMes\")' class=\"munual-btn2\">启用人工审核</div>\n          <div @click.stop='closeDialog'  v-if='noticeStatus==0' class=\"munual-btn2\">重新识别</div>\n          <div @click.stop='closePage' class=\"munual-btn2\" v-if='noticeStatus==4'>我知道了</div>\n          <div @click.stop='openVideo' class=\"munual-btn2\" v-if='noticeStatus==5'>我知道了</div>\n        </div>\n      </div>\n    </div>\n    <video muted id=\"recordVideo\"\n    playsinline='true'\n    webkit-playsinline='true' \n    style=\"object-fit:fill\"\n    x5-video-player-fullscreen=\"true\" \n    x5-video-player-type=\"h5\" \n    x5-video-orientation=\"landscape\"\n    controls=\"controls\"\n    preload=\"auto\" \n    x-webkit-airplay=\"allow\" ></video>\n  </div>\n</template>\n\n<script>\n  // import vd from '../vd/index.vue'\n  import bridge from 'fetch/bridge.js'\n  //import {uploadVideo} from 'fetch/api.js';\n  // import {uploadVideo} from 'fetch/uploadApi.js';\n  \n  export default{\n    name:'face_recognition',\n    data(){\n      return {\n        isShow:1,\n        noticeShow:false,\n        noticeStatus:-1,\n        errorNum:0,\n        videoRecordJson:{file:'',url:''},\n      }\n    },\n    components:{\n      // vd,\n    },\n    activated(){\n      this.fromType=this.$route.query.fromType;\n      this.errorNum=0;\n      // if(this.fromType==3){\n      //   this.noticeShow=true\n      //   this.noticeStatus=4;\n      // }\n      // this.noticeShow=true\n      // this.noticeStatus=2;\n    },\n    mounted(){\n      // window.receiveFaceInfo=res=>{\n      //   console.log('获取到数据',res)\n      //   if(res){\n      //     res=JSON.parse(res)\n      //     console.log(res.status==1 , res.imageId)\n      //     if(res.status==1 && res.imageId){\n      //       sessionStorage.videoData=res.imageId;\n      //       this.$router.go(-1);\n      //     }else{\n      //       this.isError();\n      //     }\n      //   }else{\n      //     this.isError();\n      //   }\n      // }\n    },\n    methods:{\n      closePage(){\n        if(this.$route.query.type=='app'){\n          bridge('finishPage')\n        }else{\n          this.$router.go(-1);\n          this.closeDialog();\n        }\n      },\n      closeDialog(){\n        this.noticeShow=false;\n        this.noticeStatus=-1;\n        sessionStorage.videoData='';\n        // if(this.fromType==3){\n        //   this.gotoVd()\n        // }\n      },\n      gotoRouter(name){//跳转到人工审核\n        this.$router.push({name,query:{typeName:encodeURIComponent('居民身份证'),type:this.$route.query.type}})\n        this.closeDialog();\n      },\n      gotoVd(){\n        if(this.$route.query.type=='app'){\n          bridge('scanFace')\n        }else{\n          this.isShow=2;\n        }\n      },\n      isError(){//报错\n        this.$LoadingHide()\n        if(!this.noticeShow){\n          this.noticeShow=true;\n          if(this.fromType==3){\n            if(this.errorNum<3){\n              this.noticeStatus=0;\n            }else{\n              this.noticeStatus=4;\n            }\n          }else{\n            if(this.errorNum<3){\n              this.noticeStatus=1;\n            }else{\n              this.noticeStatus=2;\n            }\n            \n          }\n          this.errorNum++;\n        }\n      },\n      getVideo(data){//获取到了录制的视频\n        console.log('获取到了录制的视频data=',{data,size:data.file.size})\n        let file=data.file;\n        let reader=new FileReader();\n        let that=this;\n        this.isShow=1;\n        that.$LoadingShow('上传并验证中…');\n        try{\n          let formData = new FormData();\n          formData.append('appkey', '69b255a8f25e88d1d5404056611c29d3');\n          formData.append('data', file, \"file_\" + Date.parse(new Date()) + \".mp4\");\n          $.ajax({\n              type: \"post\",\n              url: \"https://file.chinadatapay.com/img/upload\",\n              // async:false,\n              contentType: false,\n              //这个一定要写\n              processData: false,\n              //这个也一定要写，不然会报错\n              data: formData,\n              dataType: 'JSON',\n              //返回类型，有 json，text，HTML。这里并没有 jsonp 格式，所以别妄想能用 jsonp 做跨域了\n              success: function(data) {\n                  console.log(data);\n                  if(data && data.data){\n                    let imageId=data.data;\n                    that.tradeUser(imageId)\n                    //that.tradeUser('6bf41b95a9d6473eb2cc5a39c0df014d')\n                  }else{\n                    that.isError()\n                  }\n                  \n              },\n              error: function(XMLHttpRequest, textStatus, errorThrown, data) {\n                that.isError()\n              }\n          });\n           \n        }catch(err){\n          console.log('errr===',err)\n          that.isError()\n        }\n      },\n      tradeUser(imageId){\n        let formData = new FormData();\n        formData.append('key', '69b255a8f25e88d1d5404056611c29d3');\n        formData.append('imageId',imageId);\n        let that=this;\n        $.ajax({\n          type: \"post\",\n          url: \"https://api1.chinadatapay.com/trade/user/9204\",\n          // async:false,\n          contentType: false,\n          //这个一定要写\n          processData: false,\n          data:formData,\n          dataType: 'JSON',\n          success:function(res){\n            console.log('请求成功==',res)\n            if(res && res.code=='10000' && res.data && res.data.return_image){\n              let img=res.data.return_image;\n              //console.log('img===',img)\n              that.getImageId(img)\n            }else{\n              that.isError()\n            }\n          },\n          error:function(err){\n            that.isError()\n            console.log('请求失败==',err)\n          }\n        })\n      },\n      getImageId(img){\n        console.log('获取请求的img',{img})\n        let file=this.changeBlob(img,'image/jpeg');\n        console.log('获取到的file=',{file})\n        let formData = new FormData();\n        formData.append('appkey', '69b255a8f25e88d1d5404056611c29d3');\n        formData.append('data', file, \"file_\" + Date.parse(new Date()) + \".jpeg\");\n        let that=this;\n        $.ajax({\n            type: \"post\",\n            url: \"https://file.chinadatapay.com/img/upload\",\n            // async:false,\n            contentType: false,\n            //这个一定要写\n            processData: false,\n            //这个也一定要写，不然会报错\n            data: formData,\n            dataType: 'JSON',\n            //返回类型，有 json，text，HTML。这里并没有 jsonp 格式，所以别妄想能用 jsonp 做跨域了\n            success: function(data) {\n                console.log('获取到的imageId=',data);\n                // let imageId=data.data;\n                // that.tradeUser(imageId)\n                if(data && data.code==\"10000\" && data.data){\n                  let imageId=data.data;\n                  sessionStorage.videoData=imageId;\n                  that.$router.go(-1);\n                }else{\n                  that.isError()\n                  sessionStorage.videoData='';\n                }\n                that.$LoadingHide()\n            },\n            error: function(XMLHttpRequest, textStatus, errorThrown, data) {\n              sessionStorage.videoData='';\n              that.isError()\n            }\n        });\n      },\n      changeBlob(urlData,type) {\n          urlData=\"data:image/jpg;base64,\"+urlData;\n          var bytes = window.atob(urlData.split(',')[1]);\n          var ab = new ArrayBuffer(bytes.length);\n          var ia = new Uint8Array(ab);\n          for (var i = 0; i < bytes.length; i++) {\n              ia[i] = bytes.charCodeAt(i);\n          }\n          return new Blob([ab], {\n              type\n          });\n      },\n      openVideo(){\n        this.$refs.VideoRef.click();\n        this.noticeShow=false;\n        this.noticeStatus=-1;\n      },\n      takeVideo(e){\n        let vid=this.$refs.VideoRef\n        let fileJson = vid.files;\n        console.log({e,fileJson})\n        console.log(fileJson.files,fileJson[0])\n        var video = fileJson[0];\n        var url = (window.URL) ? window.URL.createObjectURL(video) : window.webkitURL.createObjectURL(video);\n        //var url = URL.createObjectURL(video);\n        console.log('视频的url=',url);\n        let that=this;//loadedmetadata\n         if(!browser.versions.android){\n           console.log('是否能播放视频')\n           let audioElement = new Audio(url)\n           audioElement.muted = true\n           function addEvent2(e){\n             that.dealDuration(audioElement.duration,video,e,url);\n             audioElement.removeEventListener(\"loadedmetadata\", addEvent2)\n           }\n           audioElement.addEventListener(\"loadedmetadata\", addEvent2)\n           audioElement.play().then(()=>audioElement.pause())\n         }else{\n           let aa=document.getElementById(\"recordVideo\")\n           function addEvent1(e){\n             that.dealDuration(aa.duration,video,e,url);\n             aa.removeEventListener(\"loadedmetadata\", addEvent1);\n           }\n           aa.addEventListener(\"loadedmetadata\", addEvent1);\n           aa.src=url;\n         }\n      },\n      dealDuration(duration,video,e,url){\n        duration=Math.floor(duration)\n        if(duration<=3 && duration>=2){\n          console.log('老的视频录制==',{video},video.name,video.size)\n          let reader = new FileReader();\n          reader.onload =  (e)=> {\n            let aafile=this.dataURLtoFile(e.target.result,'aa.mp4')\n            console.log('转换为新的video==',aafile,aafile.size,aafile.name)\n            //console.log('用base64转换为的video',{data:e.target.result})\n            this.videoRecordJson.file=aafile\n            this.videoRecordJson.url=url\n            this.saver()\n          }\n          reader.readAsDataURL(video);\n          \n        }else{\n          console.log('视频时间只能为2~3秒，请重新拍摄')\n          this.noticeShow=true;\n          this.noticeStatus=5;\n          this.resetVideoRecord()\n        }\n      },\n      dataURLtoFile(dataurl, filename) {//将base64转换为文件\n        var arr = dataurl.split(','), mime = arr[0].match(/:(.*?);/)[1],\n        bstr = atob(arr[1]), n = bstr.length, u8arr = new Uint8Array(n);\n        while(n--){\n            u8arr[n] = bstr.charCodeAt(n);\n        }\n       return new File([u8arr], filename, {type:'video/mp4'});\n      },\n      saver(){\n         let file=this.videoRecordJson.file;\n         this.getVideo({file,url:this.videoRecordJson.url});\n         //this.$emit('getVideo',{file,url:this.videoRecordJson.url})\n      },\n      resetVideoRecord(){\n        this.videoRecordJson.file=null;\n        this.videoRecordJson.url=null;\n      },\n      // async uploadVideo(params){\n      //   let res=await uploadVideo(params);\n      //   console.log('提交视频=',res)\n      //   if(res && res.code==='10000'){\n      //     console.log('提交成功',res)\n      //     sessionStorage.videoData=res.data;\n      //     this.$router.go(-1);\n      //   }else{\n      //     sessionStorage.videoData=''\n      //   }\n      // },\n    }\n  }\n</script>\n\n<style scoped lang='scss'>\n  @import '~css/noticeToast.scss';\n  .face{\n    .title{\n      width:100%;\n      height: 100px;\n      font-size: 28px;\n      color: #646469;\n      line-height: 44px;\n      padding:40px 0 32px;\n      >div{\n        width:100%;\n      }\n    }\n    .img{\n      position:relative;\n      margin:0 auto;\n      width: 422px;\n      height: 706px;\n      background-image:url(../../assets/img/face/img.png);\n      background-size:100% 100%;\n      margin-bottom:22px;\n      .tag{\n        position:absolute;\n        width: 160px;\n        height: 70px;\n        background: linear-gradient(135deg,#3d8bef, #1e5dd1);\n        background-image:url(../../assets/img/face/img-1.png);\n        background-size:100% 100%;\n        left:-52px;\n        top:160px;\n        >div{\n          font-size: 32px;\n          color: #fff;\n          line-height: 44px;\n          margin-top:8px;\n        }\n      }\n      .text{\n        height: 44px;\n        font-size: 28px;\n        color: #616469;\n        line-height: 44px;\n        position:absolute;\n        width:100%;\n        bottom:-22px;\n        left:0;\n      }\n    }\n    .text4{\n      color:#1E5DD1 !important;\n    }\n    .show{\n      padding:32px 48px 176px;\n      >div{\n        width: 204px;\n        >.bg{\n          width:100%;\n          height: 188px;\n          background-size:100%;\n        }\n        >.bg1{\n          background-image:url(../../assets/img/face/img1.png);\n        }\n        >.bg2{\n          background-image:url(../../assets/img/face/img2.png);\n        }\n        >.bg3{\n          background-image:url(../../assets/img/face/img3.png);\n        }\n        .text{\n          height: 40px;\n          font-size: 24px;\n          color: #94949c;\n          line-height: 40px;\n        }\n      }\n    }\n    .phone-pad{\n      \n    }\n    .btn{\n      position:fixed;\n      bottom:0px;\n      left:0;\n      width:100%;\n      padding:24px 0;\n      .mybtn{\n        width: 622px;\n        height: 88px;\n        background: linear-gradient(135deg,#3d8bef, #1e5dd1);\n        border-radius: 48px;\n        font-size: 32px;\n        color: #fff;\n        line-height: 88px;\n        margin:0 auto;\n        display:block;\n        >input{\n          width:0;\n          height:0;\n        }\n      }\n    }\n    \n    #recordVideo{\n      width:0;\n      height:0;\n    }\n    \n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=80cdcc42&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=80cdcc42&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80cdcc42\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=80cdcc42&scoped=true&lang=scss&\""],"sourceRoot":""}